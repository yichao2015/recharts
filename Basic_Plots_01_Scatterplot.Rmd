---
title: "Basic Plots 01 - Scatterplot"
output: 
  html_document: 
    number_sections: yes
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

First, you should load `recharts`:
```{r}
library(recharts)
```

# Introduction

Scatter plot includes 2 basic types:

- scatter/point
- bubble

<table id='intro'>
<tr><td>
```{r,echo=FALSE}
echartr(iris, Petal.Width, Sepal.Width) %>% 
    setTheme('infographic', width=400, height=300) %>%
    setTitle('Scatter/point')
```
</td>
<td>
```{r,echo=FALSE}
echartr(iris, Petal.Width, Sepal.Width, weight=Petal.Length, type='bubble') %>% 
    setTheme('roma', width=400, height=300) %>% setTitle('Bubble')
```
</td></tr>
</table>

The keys are:

- numeric `x` and `y`
- valid `weight` for a bubble chart

# Function Call

```r
echartr(data, x, y, <series>, <weight>, <z>, <type>)
```

+--------+--------------------------------------------------------------------+
| Arg    |  Requirement                                                       |
+========+====================================================================+
| **data** | source data in the form of data.frame                            |
+--------+--------------------------------------------------------------------+
| **x**  | numeric independent variable. Only the first one is accepted if multiple variables are provided. |
+--------+--------------------------------------------------------------------+
| **y**  | numeric dependent variable. Only the first one is accepted if multiple variables are provided. |
+--------+--------------------------------------------------------------------+
| series | data series variable which will be coerced to factors. Only the first one is accepted if multiple variables are provided. |
+--------+--------------------------------------------------------------------+
| weight | numeric weight variable. Only the first one is accepted if multiple variables are provided. `weight` is associated with dataRange widget. If `type` is set 'bubble', a bubble chart will display. |
+--------+--------------------------------------------------------------------+
|  z     | timeline variable which will be coerced to factors. Only the first one is accepted if multiple variables are provided. |
+--------+--------------------------------------------------------------------+
| type   | - `x` and `y` are both numeric, you can omit 'type' or assign it 'auto'. |
|        | - You can also assign it 'scatter', 'point' or 'bubble' |
+--------+--------------------------------------------------------------------+


# Showcase

## Scatter Plot

### Singular Series

If `series` is not assigned, the chart gives no legend.

```{r}
echartr(iris, x=Sepal.Width, y=Petal.Width)
```

> It is equivalent to
> 
> ```r
> echartr(iris, Sepal.Width, Petal.Width, type='scatter')
> echartr(iris, ~Sepal.Width, Petal.Width, type='point')
> echartr(iris, Sepal.Width, "Petal.Width", type='bubble')
> echartr(iris, ~Sepal.Width, "Petal.Width", type='auto')
> ...
> ```

### Multiple Series

```{r}
echartr(iris, x=Sepal.Width, y=Petal.Width, series=Species)
```

### Scatter Plot with Timeline

Timeline calls for numeric or time variable. When a character variable is passed in, `echarts` coerces it to factors and uses its numeric values for plotting and character levels for timelien labels.

```{r}
echartr(iris, Sepal.Width, Petal.Width, z=Species)
```

## Bubble Chart

The key is to pass a valid `weight` variable. If `weight` is accepted, and `type` is 'bubble', a bubble chart will display. 

```{r}
echartr(iris, Sepal.Width, Petal.Width, weight=Petal.Length, type='bubble')
```

If `type` is 'scatter' or 'point', the bubbles are not shown, but you can associate `weight` with `dataRange` widget.

```{r}
echartr(iris, Sepal.Width, Petal.Width, weight=Petal.Width) %>%
    setDataRange(calculable=TRUE, splitNumber=0, labels=c('Big','Small'),
                 color=c('red', 'yellow', 'green'), valueRange=c(0, 2.5))
```

### Other Kinds of Bubbles

Bubble chart with timeline, multiple series are similar to ordinary scatter plots.

# Futher Setup

Then you can configure the widgets, add markLines and/or markPoints, fortify the chart.

You can refer to related functions to play around on your own.

